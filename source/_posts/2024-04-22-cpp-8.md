---
title: 简单学点 C++（8）：宏、内联函数
date: 2024-04-22 20:00:00
tags:
---

### 内联函数

{% asset_img inline.png 350 %}

- 宏的缺点：调试困难，错误不易理解，缺少编译器的监督。
- 宏的优点：相较于函数，宏的好处是，效率。

内联函数，可以在满足效率的要求下，避免宏的尴尬。

#### 示例：冒泡排序

```cpp
#include <iostream>
using namespace std;

// 添加 inline 关键字，使之成为内联函数
inline void swap(int* p,int* q){
  int t = *p;
  *p = *q;
  *q = t;
}

void sort(int* p,int i){
  // 每趟，逐个交换相邻的元素
  for(int j=0;j<i;j++){
    if(p[j]>p[j+1]){
      swap(&p[j],&p[j+1]);
    }
  }
}

int main(int argc, const char * argv[]) {
  int n; cin>>n;
  
  // 在堆中分配内存，长度为 n 的整数数组
  int* p=new int[n];
  for(int i=0;i<n;i++){
      cin>>p[i];
  }
  
  // 排序：总共 n-1 趟，每趟 i 次交换
  for(int i=n-1;i>=1;i--){
      sort(p,i);
  }
  
  // 打印
  for(int i=0;i<n;i++){
      cout<<p[i]<<", ";
  }
  cout<< endl;

  return 0;
}
```
